---
description:
globs:
alwaysApply: true
---

# BoardT Project Structure Guide

This rule documents the directory structure and key files/folders in the BoardT project, a SvelteKit-based storyboard and canvas application with Linear integration.

## Complete Directory Tree Structure

```
boardt/
â”œâ”€â”€ ðŸ“ .cursor/
â”‚   â””â”€â”€ ðŸ“ rules/
â”‚       â”œâ”€â”€ cursor-rules.mdc
â”‚       â”œâ”€â”€ project-structure.mdc
â”‚       â””â”€â”€ self-improve.mdc
â”œâ”€â”€ ðŸ“ .kiro/
â”œâ”€â”€ ðŸ“„ DEVELOPMENT_STATUS.md
â”œâ”€â”€ ðŸ“ docs/
â”‚   â”œâ”€â”€ canvas-implementation.md
â”‚   â”œâ”€â”€ chunk-creator-documentation.md
â”‚   â”œâ”€â”€ linear-api-integration.md
â”‚   â”œâ”€â”€ node-edge-components.md
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ ðŸ“ specs/
â”‚       â””â”€â”€ ðŸ“ storyboard-generator/
â”‚           â”œâ”€â”€ agent-assignments.md
â”‚           â”œâ”€â”€ agent-canvas-flow-architect.md
â”‚           â”œâ”€â”€ complete-instructions.md
â”‚           â”œâ”€â”€ design.md
â”‚           â”œâ”€â”€ requirements.md
â”‚           â””â”€â”€ tasks.md
â”œâ”€â”€ ðŸ“ node_modules/
â”œâ”€â”€ ðŸ“„ package.json
â”œâ”€â”€ ðŸ“„ pnpm-lock.yaml
â”œâ”€â”€ ðŸ“„ README.md
â”œâ”€â”€ ðŸ“ src/
â”‚   â”œâ”€â”€ ðŸ“„ app.d.ts
â”‚   â”œâ”€â”€ ðŸ“„ app.html
â”‚   â””â”€â”€ ðŸ“ lib/
â”‚       â””â”€â”€ ðŸ“ components/
â”‚           â”œâ”€â”€ ðŸ“ Canvas/
â”‚           â”‚   â”œâ”€â”€ CanvasControls.svelte
â”‚           â”‚   â”œâ”€â”€ CanvasView.svelte
â”‚           â”‚   â”œâ”€â”€ CanvasView_simple.svelte
â”‚           â”‚   â”œâ”€â”€ ChunkCreator.svelte
â”‚           â”‚   â”œâ”€â”€ ChunkEdge.svelte
â”‚           â”‚   â”œâ”€â”€ ChunkNode.svelte
â”‚           â”‚   â”œâ”€â”€ ConnectionEdge.svelte
â”‚           â”‚   â”œâ”€â”€ KeyframeInserter.svelte
â”‚           â”‚   â””â”€â”€ LinearIntegrationPanel.svelte
â”‚           â”œâ”€â”€ ðŸ“ ImageGeneration/
â”‚           â”œâ”€â”€ ðŸ“ SetView/
â”‚           â”‚   â”œâ”€â”€ ChunkCard.svelte
â”‚           â”‚   â”œâ”€â”€ ExportControls.svelte
â”‚           â”‚   â”œâ”€â”€ PresentationView.svelte
â”‚           â”‚   â””â”€â”€ StoryFlowDiagram.svelte
â”‚           â”œâ”€â”€ ðŸ“ StoryFlow/
â”‚           â”‚   â”œâ”€â”€ BranchingLogic.svelte
â”‚           â”‚   â””â”€â”€ ConnectionValidator.svelte
â”‚           â””â”€â”€ ðŸ“ UI/
â”‚               â””â”€â”€ LinearConfig.svelte
â”‚       â”œâ”€â”€ ðŸ“ mcp/
â”‚       â”‚   â”œâ”€â”€ ðŸ“ linear/
â”‚       â”‚   â”‚   â”œâ”€â”€ createProjectAndIssues.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ linearService.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ syncService.ts
â”‚       â”‚   â”‚   â””â”€â”€ types.ts
â”‚       â”‚   â”œâ”€â”€ useMcpTool.js
â”‚       â”‚   â””â”€â”€ useMcpTool.ts
â”‚       â”œâ”€â”€ ðŸ“ services/
â”‚       â”‚   â””â”€â”€ falai.js
â”‚       â”œâ”€â”€ ðŸ“ stores/
â”‚       â”‚   â”œâ”€â”€ imageGeneration.svelte.js
â”‚       â”‚   â”œâ”€â”€ linearConfig.svelte.js
â”‚       â”‚   â”œâ”€â”€ presentationMode.svelte.js
â”‚       â”‚   â”œâ”€â”€ storyChunks.svelte.js
â”‚       â”‚   â””â”€â”€ ui.svelte.js
â”‚       â””â”€â”€ ðŸ“ types/
â”‚           â”œâ”€â”€ api.d.ts
â”‚           â”œâ”€â”€ components.d.ts
â”‚           â””â”€â”€ storyboard.js
â”‚   â”œâ”€â”€ ðŸ“ routes/
â”‚   â”‚   â””â”€â”€ +page.svelte
â”‚   â””â”€â”€ ðŸ“ test/
â”‚       â”œâ”€â”€ models.test.js
â”‚       â”œâ”€â”€ setup.js
â”‚       â”œâ”€â”€ simple.test.js
â”‚       â”œâ”€â”€ storyboard-basic.test.js
â”‚       â”œâ”€â”€ storyboard-comprehensive.test.js
â”‚       â””â”€â”€ storyboard-models.test.js
â”œâ”€â”€ ðŸ“ static/
â”‚   â””â”€â”€ favicon.svg
â”œâ”€â”€ ðŸ“„ svelte.config.js
â”œâ”€â”€ ðŸ“„ tsconfig.json
â”œâ”€â”€ ðŸ“„ vite.config.js
â””â”€â”€ ðŸ“„ vitest.config.js
```

## Directory Branch Structure

**Quick Reference:**
- `docs > specs > storyboard-generator` - Project specifications and agent assignments
- `src > lib > components > Canvas` - Canvas functionality
- `src > lib > components > SetView` - Story presentation
- `src > lib > components > StoryFlow` - Branching logic
- `src > lib > components > UI` - General UI components
- `src > lib > stores` - State management
- `src > lib > services` - External integrations
- `src > lib > mcp` - Model Context Protocol
- `src > lib > types` - Type definitions
- `src > test` - Test suite

## Root Level Structure

### Configuration Files
- **`package.json`** - Project dependencies and scripts
- **`pnpm-lock.yaml`** - Package manager lock file
- **`svelte.config.js`** - SvelteKit configuration
- **`tsconfig.json`** - TypeScript configuration
- **`vite.config.js`** - Vite build tool configuration
- **`vitest.config.js`** - Testing framework configuration
- **`app.d.ts`** - SvelteKit app type definitions
- **`app.html`** - Main HTML template

### Development & Project Management
- **`.kiro/`** - Project specifications and agent assignments (now moved to docs/specs)

### Documentation
- **`README.md`** - Project overview and setup instructions
- **`DEVELOPMENT_STATUS.md`** - Current development status and roadmap
- **`docs/`** - Detailed documentation
  - `canvas-implementation.md` - Canvas functionality docs
  - `chunk-creator-documentation.md` - Chunk creation system
  - `linear-api-integration.md` - Linear API integration
  - `node-edge-components.md` - Node and edge components
  - `README.md` - Documentation index
  - **`specs/storyboard-generator/`** - Storyboard generator specifications
    - `agent-assignments.md` - Agent role assignments
    - `agent-canvas-flow-architect.md` - Canvas flow architecture specs
    - `complete-instructions.md` - Complete implementation instructions
    - `design.md` - Design specifications
    - `requirements.md` - Project requirements
    - `tasks.md` - Task definitions and assignments

## Source Code Structure (`src/`)

### SvelteKit Structure
```
src/
â”œâ”€â”€ app.d.ts          # SvelteKit type definitions
â”œâ”€â”€ app.html          # Main app template
â”œâ”€â”€ routes/           # SvelteKit routes
â”‚   â””â”€â”€ +page.svelte  # Main page component
â””â”€â”€ lib/              # Shared libraries and components
```

### Components (`src/lib/components/`)

#### Canvas System (`Canvas/`)
Core canvas functionality for storyboard creation:
- **`CanvasView.svelte`** - Main canvas component
- **`CanvasView_simple.svelte`** - Simplified canvas view
- **`CanvasControls.svelte`** - Canvas control panel
- **`ChunkCreator.svelte`** - Tool for creating story chunks
- **`ChunkNode.svelte`** - Visual representation of story chunks
- **`ChunkEdge.svelte`** - Connections between chunks
- **`ConnectionEdge.svelte`** - Connection visualization
- **`KeyframeInserter.svelte`** - Keyframe insertion tool
- **`LinearIntegrationPanel.svelte`** - Linear API integration panel

#### Story Presentation (`SetView/`)
Components for viewing and presenting story content:
- **`PresentationView.svelte`** - Main presentation component
- **`StoryFlowDiagram.svelte`** - Story flow visualization
- **`ChunkCard.svelte`** - Individual chunk display
- **`ExportControls.svelte`** - Export functionality

#### Story Flow Logic (`StoryFlow/`)
Advanced story branching and validation:
- **`BranchingLogic.svelte`** - Story branching logic
- **`ConnectionValidator.svelte`** - Connection validation

#### User Interface (`UI/`)
General UI components:
- **`LinearConfig.svelte`** - Linear API configuration

#### Image Generation (`ImageGeneration/`)
*Currently empty - reserved for future image generation features*

### Services (`src/lib/services/`)
- **`falai.js`** - FAL.ai service integration for image generation

### State Management (`src/lib/stores/`)
Svelte stores for application state:
- **`storyChunks.svelte.js`** - Story chunk data management
- **`imageGeneration.svelte.js`** - Image generation state
- **`linearConfig.svelte.js`** - Linear API configuration
- **`presentationMode.svelte.js`** - Presentation mode state
- **`ui.svelte.js`** - General UI state

### MCP Integration (`src/lib/mcp/`)
Model Context Protocol integration for external tools:
- **`useMcpTool.js`** - JavaScript MCP tool utilities
- **`useMcpTool.ts`** - TypeScript MCP tool utilities
- **`linear/`** - Linear-specific MCP integration
  - `createProjectAndIssues.ts` - Project and issue creation
  - `linearService.ts` - Linear API service
  - `syncService.ts` - Synchronization service
  - `types.ts` - Type definitions

### Type Definitions (`src/lib/types/`)
- **`api.d.ts`** - API-related type definitions
- **`components.d.ts`** - Component type definitions
- **`storyboard.js`** - Storyboard-specific types

## Testing (`src/test/`)
Comprehensive test suite:
- **`setup.js`** - Test configuration and setup
- **`models.test.js`** - Model-related tests
- **`simple.test.js`** - Basic functionality tests
- **`storyboard-basic.test.js`** - Basic storyboard tests
- **`storyboard-comprehensive.test.js`** - Comprehensive storyboard tests
- **`storyboard-models.test.js`** - Storyboard model tests

## Static Assets (`static/`)
- **`favicon.svg`** - Application favicon

## Development and Build Artifacts
- **`node_modules/`** - Installed dependencies
- **`vite.config.js.timestamp-*`** - Vite build cache files

## Key Architectural Patterns

### Component Organization
- **Canvas components**: Handle visual storyboard creation
- **SetView components**: Manage story presentation and export
- **StoryFlow components**: Handle complex branching logic
- **UI components**: General-purpose interface elements

### State Management
- Centralized stores for different domains (story chunks, UI, image generation, Linear config)
- Svelte's reactive stores for state management

### Integration Points
- **Linear API**: Project management integration via MCP
- **FAL.ai**: Image generation service
- **MCP**: Extensible tool integration framework

### Testing Strategy
- Comprehensive test coverage across models, components, and integration points
- Separate test files for different functionality areas

## File Naming Conventions

### Components
- **PascalCase** with `.svelte` extension (e.g., `CanvasView.svelte`)
- Descriptive names indicating component purpose
- Suffix patterns:
  - `*View.svelte` - Main view components
  - `*Panel.svelte` - Configuration/side panels
  - `*Card.svelte` - Card-based displays
  - `*Edge.svelte` - Connection/relationship components

### Stores
- **camelCase** with `.svelte.js` extension (e.g., `storyChunks.svelte.js`)
- Domain-specific naming

### Services
- **camelCase** with `.js` extension (e.g., `falai.js`)

### Types
- **camelCase** with `.d.ts` or `.js` extension
- Descriptive names for type collections

## Development Workflow

1. **Components**: Place in appropriate subfolder under `src/lib/components/`
2. **Stores**: Add to `src/lib/stores/` following naming conventions
3. **Services**: Add to `src/lib/services/` for external integrations
4. **Types**: Add to `src/lib/types/` for shared type definitions
5. **Tests**: Create corresponding test files in `src/test/`

## Important Notes

- This is a **SvelteKit** project with **TypeScript** support
- Uses **pnpm** as the package manager
- Implements **MCP** for tool integrations
- Focuses on **storyboard creation** with **canvas-based editing**
- Integrates with **Linear** for project management
- Supports **image generation** via external services

```typescript
// Example: Adding a new canvas component
// âœ… Place in: src/lib/components/Canvas/NewTool.svelte
// âœ… Follow naming: PascalCase with descriptive suffix

// Example: Adding a new store
// âœ… Place in: src/lib/stores/newFeature.svelte.js
// âœ… Follow naming: camelCase with .svelte.js extension
```